/**
 * @fileoverview Firestore Security Rules for the survey application.
 *
 * Core Philosophy:
 * This ruleset enforces a role-based access control model. Only authenticated
 * administrators are allowed to create new surveys.  No public read access is granted.
 *
 * Data Structure:
 * All survey data is stored in the `/surveys/{docId}` collection.
 *
 * Key Security Decisions:
 * - Public listing of surveys is explicitly disallowed.
 * - Only authenticated admin users can create survey submissions.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Secures the /surveys/{docId} collection, allowing only authenticated admin users to create new survey submissions.
     * @path /databases/{database}/documents/surveys/{docId}
     * @allow (create) An authenticated admin user creates a survey document.
     * @deny (create) An unauthenticated user attempts to create a survey document.
     * @principle Enforces role-based access control for survey creation.
     */
    match /surveys/{docId} {
      allow get: if false;
      allow list: if false;

      allow create: if isSignedIn();
      allow update: if false;
      allow delete: if false;
    }
  }

  function isSignedIn() {
    return request.auth != null;
  }
}